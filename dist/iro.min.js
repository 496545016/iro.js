!function(){"use strict";var t=function(){function t(t){var e=t.r,i=t.g,r=t.b,a=Math.max(e,i,r),s=Math.min(e,i,r),n=a-s,o,h=0===a?0:n/a,l=a/255;switch(a){case s:o=0;break;case e:o=i-r+n*(i<r?6:0),o/=6*n;break;case i:o=r-e+2*n,o/=6*n;break;case r:o=e-i+4*n,o/=6*n}return{h:~~(360*o),s:~~(100*h),v:~~(100*l)}}function e(t){var e=t.s/100,i=t.l/100;return e*=i<.5?i:1-i,{h:t.h,s:~~(2*e/(i+e)*100),v:~~(100*(i+e))}}function i(t){t=t.replace(/#/g,"");var e=~~("0x"+t);return 3===t.length?{r:17*(e>>8),g:17*(e>>4&15),b:17*(15&e)}:{r:e>>16,g:e>>8&255,b:255&e}}function r(t){return this instanceof r?(this.value={},void(t&&this.setFromString(t))):new r(t)}return r.prototype.set=function(t){this.value=t},r.prototype.setFromString=function(r){var a,s=r.match(/(^rgba?|^hsla?)(?=\(.*?\))|(^#)(?=[a-f0-9])/i);switch(s?s[0]:null){case"#":a=t(i(r));break;case"rgb":case"rgba":var n=r.match(/(rgba?)\((\d+)(?:\D+?)(\d+)(?:\D+?)(\d+)(?:\D+?)?([0-9\.]+?)?\)/i);a=t({r:parseInt(n[2]),g:parseInt(n[3]),b:parseInt(n[4])});break;case"hsl":case"hsla":var n=r.match(/(hsla?)\((\d+)(?:\D+?)(\d+)(?:\D+?)(\d+)(?:\D+?)?([0-9\.]+?)?\)/i);a=e({h:parseInt(n[2]),s:parseInt(n[3]),l:parseInt(n[4])});break;default:console.warn("Error: '",r,"' could not be parsed as a CSS color")}a&&this.set(a)},r.prototype.getRgb=function(){var t=this.value,e,i,r,a,s,n,o,h,l=t.h/360,c=t.s/100,u=t.v/100;switch(a=Math.floor(6*l),s=6*l-a,n=u*(1-c),o=u*(1-s*c),h=u*(1-(1-s)*c),a%6){case 0:e=u,i=h,r=n;break;case 1:e=o,i=u,r=n;break;case 2:e=n,i=u,r=h;break;case 3:e=n,i=o,r=u;break;case 4:e=h,i=n,r=u;break;case 5:e=u,i=n,r=o}return{r:~~(255*e),g:~~(255*i),b:~~(255*r)}},r.prototype.getRgbString=function(){var t=this.getRgb();return[t.a?"rgba":"rgb","(",t.r,", ",t.g,", ",t.b,t.a?", "+t.a:"",")"].join("")},r.prototype.getHexString=function(t){var e=this.getRgb(),i,r;return t&&e.r%17===0&&e.g%17===0&&e.b%17===0?(i=e.r/17<<8|e.g/17<<4|e.b/17,r=4):(i=e.r<<16|e.g<<8|e.b,r=7),"#"+function(t){return new Array(r-t.length).join("0")+t}(i.toString(16).toUpperCase())},r.prototype.getHsl=function(){var t=this.value.s/100,e=this.value.v/100,i=(2-t)*e;return t=0==t?0:t*e/(i<1?i:2-i),{h:this.value.h,s:~~(100*t),l:~~(50*i)}},r.prototype.getHslString=function(){var t=this.getHsl();return[t.a?"hsla":"hsl","(",t.h,", ",t.s,"%, ",t.l,"%",t.a?", "+t.a:"",")"].join("")},r}(),e=function(){function e(i){return this instanceof e?(this._watchCallback,this._oldValue={h:void 0,s:void 0,v:void 0},void t.call(this,i)):new e(i)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.watch=function(t){this._watchCallback=t},e.prototype.unwatch=function(){this._watchCallback=void 0},e.prototype.set=function(t){var e={};for(var i in this._oldValue)t.hasOwnProperty(i)||(t[i]=this._oldValue[i]),e[i]=!(t[i]==this._oldValue[i]);this.value=t,(e.h||e.s||e.v)&&"function"==typeof this._watchCallback&&this._watchCallback(this.value,this._oldValue,e),this._oldValue=t},e}(),i=function(){var t={},e;return{getSheet:function(){var t=!1;return function(){if(!t){var i=document.createElement("style");i.setAttribute("media","screen"),i.appendChild(document.createTextNode("")),i.title="iroStyleSheet",document.head.appendChild(i),t=i.sheet,e=!!t.insertRule}return t}}(),setRule:function(i,r,a){var s=this.getSheet(),n=s.rules||s.cssRules;if(r=r.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()}),t.hasOwnProperty(i))n[t[i]].style.setProperty(r,a);else{var o=n.length;e?s.insertRule([i," {",r,": ",a,";}"].join(""),o):s.addRule(i,[r,": ",a].join(""),o),t[i]=o}}}}(),r=function(){function t(t){n&&(t.preventDefault(),t="touchmove"===t.type?t.changedTouches[0]:t,n._inputMoveHandler(t.clientX,t.clientY))}function r(t){n&&(t.preventDefault(),n._mouseTarget=void 0,n=void 0)}function a(t,e,i){var r=document.createElement("canvas");return r.width=t,r.height=e,i&&(r.style.position="absolute",r.style.top="0",r.style.left="0"),r}function s(t,i){if(!(this instanceof s))return new s(t,i);if(!t)return void console.warn("IroColorPicker error - no element specified");this.el="string"==typeof t?document.querySelector(t):t,this.width=i.width||parseInt(this.el.getAttribute("width"))||320,this.height=i.height||parseInt(this.el.getAttribute("height"))||320,this.el.style.position="relative",this.main=a(this.width,this.height,!1),this.el.appendChild(this.main),this.mainCtx=this.main.getContext("2d"),this.overlay=a(this.width,this.height,!0),this.el.appendChild(this.overlay),this.overlayCtx=this.overlay.getContext("2d");var r=6,n=24,o=8,h=2*o+2*r,l=Math.min(this.height-h-n,this.width),c=(this.width-l)/2;this._layout={Mr:o,Rd:l,Rr:l/2,Re:l/2-(o+r),Rcx:c+l/2,Rcy:l/2,Rx1:c,Rx2:c+l,Ry1:0,Ry2:l,Sw:l,Sh:h,Sr:h/2,Srw:l-2*(o+r),Srs:c+(o+r),Sre:c+l-(o+r),Sx1:c,Sx2:c+l,Sy1:l+n,Sy2:l+h+n,isPointInSlider:function(t,e){return t>this.Sx1&&t<this.Sx2&&e>this.Sy1&&e<this.Sy2},isPointInRing:function(t,e){var i=Math.abs(t-this.Rcx),r=Math.abs(e-this.Rcy);return Math.sqrt(i*i+r*r)<this.Rr}},this._drawSlider(),this.css=i.css||void 0,this._watchCallback=i.watchCallback||void 0,this._overlayMarkers={},this._mouseTarget,this.el.addEventListener("touchstart",function(t){var e=t.changedTouches[0];this._inputStartHandler(e.clientX,e.clientY)}.bind(this),!1),this.el.addEventListener("mousedown",function(t){this._inputStartHandler(t.clientX,t.clientY)}.bind(this),!1),this.color=e(),this.color.watch(this._update.bind(this)),this.color.watch=this.color.unwatch=void 0,this.color.setFromString(i.color||"#fff")}var n;return document.body.addEventListener("touchmove",t,!1),document.body.addEventListener("touchend",r,!1),document.body.addEventListener("mousemove",t,!1),document.body.addEventListener("mouseup",r,!1),s.prototype.watch=function(t){this._watchCallback||"function"!=typeof t||(this._watchCallback=t)},s.prototype.unwatch=function(){this._watchCallback=void 0},s.prototype._inputHandler=function(t,e){var i=this._layout;if("slider"==this._mouseTarget)t=Math.max(Math.min(t,i.Sre),i.Srs)-i.Srs,this.color.set({v:~~(100/i.Srw*t)});else if("ring"==this._mouseTarget){var r=Math.atan2(t-i.Rcx,e-i.Rcy),a=360-~~((r*(180/Math.PI)+270)%360),s=Math.min(Math.sqrt((i.Rcx-t)*(i.Rcx-t)+(i.Rcy-e)*(i.Rcy-e)),i.Re);this.color.set({h:a,s:~~(100/i.Re*s)})}},s.prototype._inputStartHandler=function(t,e){var i=this.main.getBoundingClientRect();if(t-=i.left,e-=i.top,this._layout.isPointInSlider(t,e))this._mouseTarget="slider";else{if(!this._layout.isPointInRing(t,e))return!1;this._mouseTarget="ring"}n=this,this._inputHandler(t,e)},s.prototype._inputMoveHandler=function(t,e){if(n){var i=this.main.getBoundingClientRect();this._inputHandler(t-i.left,e-i.top)}},s.prototype._drawMarkerAtPos=function(t,e){this.overlayCtx.lineWidth=4,this.overlayCtx.beginPath(),this.overlayCtx.strokeStyle="#333",this.overlayCtx.arc(t,e,this._layout.Mr,0,2*Math.PI),this.overlayCtx.stroke(),this.overlayCtx.lineWidth=2,this.overlayCtx.beginPath(),this.overlayCtx.strokeStyle="#fff",this.overlayCtx.arc(t,e,this._layout.Mr,0,2*Math.PI),this.overlayCtx.stroke()},s.prototype._updateMarker=function(t,e,i){this._overlayMarkers[t]={x:e,y:i},this.overlayCtx.clearRect(0,0,this.width,this.height),this._overlayMarkers.ring&&this._drawMarkerAtPos(this._overlayMarkers.ring.x,this._overlayMarkers.ring.y),this._overlayMarkers.slider&&this._drawMarkerAtPos(this._overlayMarkers.slider.x,this._overlayMarkers.slider.y)},s.prototype._drawWheel=function(t){t=void 0===t?100:Math.min(Math.max(t,0),100);var e=this._layout;this.mainCtx.lineWidth=Math.round(e.Rd/100),this.mainCtx.clearRect(e.Rx1,e.Ry1,e.Rd,e.Rd);for(var i=0;i<360;i++){var r=i*Math.PI/180,a=Math.cos(r),s=Math.sin(r);this.mainCtx.beginPath(),this.mainCtx.strokeStyle=["hsl(",i,", 100%, ",t/2,"%)"].join(""),this.mainCtx.moveTo(e.Rcx,e.Rcy),this.mainCtx.lineTo(e.Rcx+e.Rr*a,e.Rcy+e.Rr*s),this.mainCtx.stroke()}var n=this.mainCtx.createRadialGradient(e.Rcx,e.Rcy,2,e.Rcx,e.Rcy,e.Re);n.addColorStop(0,"hsla(0, 0%, "+t+"%, 1)"),n.addColorStop(1,"hsla(0, 0%, "+t+"%, 0)"),this.mainCtx.fillStyle=n,this.mainCtx.fillRect(e.Rx1,e.Ry1,e.Rd,e.Rd)},s.prototype._drawSlider=function(){var t=this._layout;this.mainCtx.clearRect(t.Sx1,t.Sy1,t.Sw,t.Sh),this.mainCtx.beginPath(),this.mainCtx.moveTo(t.Sx1+t.Sr,t.Sy1),this.mainCtx.arcTo(t.Sx2,t.Sy1,t.Sx2,t.Sy2,t.Sr),this.mainCtx.arcTo(t.Sx2,t.Sy2,t.Sx1,t.Sy2,t.Sr),this.mainCtx.arcTo(t.Sx1,t.Sy2,t.Sx1,t.Sy1,t.Sr),this.mainCtx.arcTo(t.Sx1,t.Sy1,t.Sx2,t.Sy1,t.Sr),this.mainCtx.closePath();var e=this.mainCtx.createLinearGradient(t.Sx1,t.Sy1,t.Sx2,t.Sy1);e.addColorStop(0,"#000"),e.addColorStop(1,"#fff"),this.mainCtx.fillStyle=e,this.mainCtx.fill()},s.prototype._update=function(t,e,r){var a=this._layout;if("function"==typeof this._watchCallback&&this._watchCallback.call(this,this.color,r),r.v){this._drawWheel(t.v);var s=t.v/100*a.Srw;this._updateMarker("slider",a.Srs+s,a.Sy1+a.Sh/2)}if(r.h||r.s){var n=r.h?t.h:e.h,o=r.s?t.s:e.s,h=n*(Math.PI/180),l=o/100*a.Re;this._updateMarker("ring",a.Rcx+l*Math.cos(h),a.Rcy+l*Math.sin(h))}if(this.css){var c=this.color.getRgbString(),u=this.css;for(var d in u){var y=u[d];for(var v in y)i.setRule(d,v,c)}}},s}();window.iro={styleSheetWriter:i,Color:t,ExtendedColor:e,ColorWheel:r}}();
//# sourceMappingURL=./iro.min.js.map